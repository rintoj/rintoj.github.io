var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(k,v):void 0},__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};System.register("state/pagination",[],function(exports_1){"use strict";var Page;return{setters:[],execute:function(){Page=function(){function Page(totalItems,pageSize,currentPage,filters){void 0===pageSize&&(pageSize=10),void 0===currentPage&&(currentPage=0),this._totalItems=0,this._pageSize=10,this._currentPage=0,this._totalItems=totalItems,this._pageSize=pageSize,this._currentPage=currentPage,this._filters=filters}return Object.defineProperty(Page.prototype,"totalPages",{get:function(){return Math.ceil(this.totalItems/this.pageSize)},enumerable:!0,configurable:!0}),Object.defineProperty(Page.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Page.prototype.setFilters=function(filters){var page=this.clone();return page._filters=filters,page},Object.defineProperty(Page.prototype,"totalItems",{get:function(){return this._totalItems},enumerable:!0,configurable:!0}),Page.prototype.setTotalItems=function(totalItems){var page=this.clone();return page._totalItems=totalItems,page},Object.defineProperty(Page.prototype,"currentPage",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),Page.prototype.setCurrentPage=function(currentPage){var page=this.clone();return page._currentPage=currentPage,page},Object.defineProperty(Page.prototype,"pageSize",{get:function(){return this._pageSize},enumerable:!0,configurable:!0}),Page.prototype.setPageSize=function(pageSize){var page=this.clone();return page._pageSize=pageSize,page},Page.prototype.currentIndex=function(){return{from:this.currentPage*this.pageSize,size:this.pageSize}},Page.prototype.next=function(){return this.currentPage<this.totalPages?new Page(this.totalItems,this.pageSize,this.currentPage+1,this.filters):this},Page.prototype.previous=function(){return this.currentPage>0?new Page(this.totalItems,this.pageSize,this.currentPage-1,this.filters):this},Page.prototype.clone=function(){return new Page(this.totalItems,this.pageSize,this.currentPage,this.filters)},Page.prototype.merge=function(nextPage){void 0!==nextPage.totalItems&&(this.totalItems=nextPage.totalItems),void 0!==nextPage.pageSize&&(this.pageSize=nextPage.pageSize),void 0!==nextPage.currentPage&&(this.currentPage=nextPage.currentPage),void 0!==nextPage.filters&&(this.filters=nextPage.filters)},Page}(),exports_1("Page",Page)}}}),System.register("state/projectlog",[],function(exports_2){"use strict";return{setters:[],execute:function(){}}}),System.register("service/rest.service",["rxjs/Observable","angular2/core","angular2/http"],function(exports_3){"use strict";var Observable_1,core_1,http_1,BaseRestService;return{setters:[function(Observable_1_1){Observable_1=Observable_1_1},function(core_1_1){core_1=core_1_1},function(http_1_1){http_1=http_1_1}],execute:function(){BaseRestService=function(){function BaseRestService(http,requestOptions,baseUrl,cacheRequest){void 0===baseUrl&&(baseUrl=""),void 0===cacheRequest&&(cacheRequest=!0),this.http=http,this.requestOptions=requestOptions,this.baseUrl=baseUrl,this.cacheRequest=cacheRequest,this.requestsInFlight={}}return BaseRestService.prototype.get=function(url,search){return this.request(url,http_1.RequestMethod.Get,null,search)},BaseRestService.prototype.post=function(url,body,search){return this.request(url,http_1.RequestMethod.Post,body,search)},BaseRestService.prototype.put=function(url,body,search){return this.request(url,http_1.RequestMethod.Put,body,search)},BaseRestService.prototype["delete"]=function(url,body,search){return this.request(url,http_1.RequestMethod.Delete,body,search)},BaseRestService.prototype.request=function(url,method,body,search){return this.httpRequest(new http_1.RequestOptions(this.requestOptions.merge({url:this.baseUrl+url,body:JSON.stringify(body),search:this.serialize(search),method:method})))},BaseRestService.prototype.httpRequest=function(options){var _this=this,requestId=JSON.stringify(options),request=this.requestsInFlight[requestId];return request&&this.cacheRequest?request:Observable_1.Observable.create(function(observer){_this.requestsInFlight[requestId]=_this.http.request(new http_1.Request(options)).share()["catch"](function(response){return _this.processError(response,observer)})["finally"](function(){return _this.requestsInFlight[requestId]=void 0}),_this.requestsInFlight[requestId].subscribe(function(data){return observer.next(data)},function(error){return observer.error(error)},function(){return observer.complete()})})},BaseRestService.prototype.serialize=function(object){var serializedString=[];for(var property in object)object.hasOwnProperty(property)&&serializedString.push(encodeURIComponent(property)+"="+encodeURIComponent(object[property]));return serializedString.join("&")},BaseRestService.prototype.processError=function(response,observer){try{switch(response.status){case 400:throw"Bad Request";case 401:throw"User is unauthorized!";case 403:throw"User is forbidden from accessing this resource!";default:throw"Unknown error occured! ["+response.status+"]"}}catch(error){observer.error({status:response.status,message:error,response:response.json()}),observer.complete()}return Observable_1.Observable.empty()},BaseRestService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http,http_1.RequestOptions,String,Boolean])],BaseRestService)}(),exports_3("BaseRestService",BaseRestService)}}}),System.register("service/oauth2-rest.service",["rxjs/Observable","angular2/core","service/rest.service","angular2/http"],function(exports_4){"use strict";var Observable_2,core_2,rest_service_1,http_2,RestServiceWithOAuth2;return{setters:[function(Observable_2_1){Observable_2=Observable_2_1},function(core_2_1){core_2=core_2_1},function(rest_service_1_1){rest_service_1=rest_service_1_1},function(http_2_1){http_2=http_2_1}],execute:function(){RestServiceWithOAuth2=function(_super){function RestServiceWithOAuth2(http,options){_super.call(this,http,new http_2.BaseRequestOptions,options.baseUrl,options.cacheRequest),this.http=http,this.options=options,options.cacheRequest||this.requestOptions.headers.append("Cache-Control","no-cache"),this.requestOptions.headers.append("Content-Type",options.contentType||"application/json")}return __extends(RestServiceWithOAuth2,_super),RestServiceWithOAuth2.prototype.authenticate=function(userName,password){var _this=this,headers=new http_2.Headers;headers.append("Cache-Control","no-cache"),headers.append("Content-Type","application/x-www-form-urlencoded"),headers.append("Authorization","Basic "+btoa(this.options.clientId+":"+this.options.clientSecret));var options=new http_2.RequestOptions({method:http_2.RequestMethod.Post,url:this.options.authUrl||this.options.baseUrl+"/oauth2/token",body:this.serialize({username:userName,password:password,grant_type:"password"}),headers:headers});return Observable_2.Observable.create(function(observer){_this.httpRequest(options).map(function(response){return response.json()}).subscribe(function(data){_this.options.accessToken={token:data.access_token,expiresIn:data.expires_in},_this.options.refreshToken={token:data.refresh_token},observer.next({accessToken:_this.options.accessToken,refreshToken:_this.options.refreshToken}),observer.complete()},function(error){observer.error(error),observer.complete()})}).share()},RestServiceWithOAuth2.prototype.revokeAuthentication=function(){var _this=this,headers=new http_2.Headers;headers.append("Cache-Control","no-cache"),headers.append("Content-Type","application/json");var options=new http_2.RequestOptions({method:http_2.RequestMethod.Post,url:this.options.revokeAuthUrl||this.options.baseUrl+"/oauth2/revoke",headers:headers});return Observable_2.Observable.create(function(observer){_this.httpRequestWithAuth(options).map(function(response){return _this.options.accessToken=null,_this.options.refreshToken=null,response.json()}).subscribe(function(){observer.next(null),observer.complete()},function(){observer.next(null),observer.complete()},function(){observer.complete()})}).share()},RestServiceWithOAuth2.prototype.request=function(url,method,body,search){return this.httpRequestWithAuth(new http_2.RequestOptions(this.requestOptions.merge({url:this.baseUrl+url,body:JSON.stringify(body),search:this.serialize(search),method:method})))},RestServiceWithOAuth2.prototype.requestWithBasicAuth=function(url,method,body,search){return this.httpRequestWithBasicAuth(new http_2.RequestOptions(this.requestOptions.merge({url:this.baseUrl+url,body:JSON.stringify(body),search:this.serialize(search),method:method})))},RestServiceWithOAuth2.prototype.httpRequestWithBasicAuth=function(options){return this.options.clientId&&this.options.clientSecret&&(options.headers.set("Content-Type","application/x-www-form-urlencoded"),options.headers.set("Authorization","Basic "+btoa(this.options.clientId+":"+this.options.clientSecret))),this.httpRequest(options)},RestServiceWithOAuth2.prototype.httpRequestWithAuth=function(options){return this.options.accessToken&&this.options.accessToken.token&&options.headers.set("Authorization","Bearer "+this.options.accessToken.token),this.httpRequest(options)},RestServiceWithOAuth2=__decorate([core_2.Injectable(),__param(1,core_2.Inject("RestServiceOptions")),__metadata("design:paramtypes",[http_2.Http,Object])],RestServiceWithOAuth2)}(rest_service_1.BaseRestService),exports_4("RestServiceWithOAuth2",RestServiceWithOAuth2)}}}),System.register("state/user",[],function(exports_5){"use strict";var Role;return{setters:[],execute:function(){!function(Role){Role[Role.ADMIN=0]="ADMIN",Role[Role.USER=1]="USER"}(Role||(Role={})),exports_5("Role",Role)}}}),System.register("state/ui-state",[],function(exports_6){"use strict";var ApplicationStatus;return{setters:[],execute:function(){!function(ApplicationStatus){ApplicationStatus[ApplicationStatus.STARTING=0]="STARTING",ApplicationStatus[ApplicationStatus.STARTED=1]="STARTED",ApplicationStatus[ApplicationStatus.STOPPED=2]="STOPPED",ApplicationStatus[ApplicationStatus.TERMINATED=3]="TERMINATED"}(ApplicationStatus||(ApplicationStatus={})),exports_6("ApplicationStatus",ApplicationStatus)}}}),System.register("state/application-state",["rxjs/Observable"],function(exports_7){"use strict";var Observable_3,ApplicationStateObservable;return{setters:[function(Observable_3_1){Observable_3=Observable_3_1}],execute:function(){ApplicationStateObservable=function(_super){function ApplicationStateObservable(){_super.apply(this,arguments)}return __extends(ApplicationStateObservable,_super),ApplicationStateObservable}(Observable_3.Observable),exports_7("ApplicationStateObservable",ApplicationStateObservable)}}}),System.register("service/data.service",["angular2/core"],function(exports_8){"use strict";var core_3,DataService;return{setters:[function(core_3_1){core_3=core_3_1}],execute:function(){DataService=function(_super){function DataService(options){_super.call(this,options.database,{autoOpen:!0}),this.options=options,this.version(1).stores(options.stores)}return __extends(DataService,_super),DataService.prototype.version=function(version){return _super.prototype.version.call(this,version)},DataService=__decorate([__param(0,core_3.Inject("DataServiceOptions")),__metadata("design:paramtypes",[Object])],DataService)}(Dexie),exports_8("DataService",DataService)}}}),System.register("state/config",["state/pagination","state/ui-state"],function(exports_9){"use strict";var pagination_1,ui_state_1,DefaultConfig,DevConfig,ProdConfig,Config;return{setters:[function(pagination_1_1){pagination_1=pagination_1_1},function(ui_state_1_1){ui_state_1=ui_state_1_1}],execute:function(){DefaultConfig=function(){function DefaultConfig(){}return Object.defineProperty(DefaultConfig,"INITIAL_STATE",{get:function(){return{projectlogs:{list:[],page:new pagination_1.Page(0,10)},ui:{syncing:!1,projectlog:{sortOrderAsc:!0,fetching:!1},restorePending:!0,applicationStatus:ui_state_1.ApplicationStatus.STOPPED}}},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"SERVICE_RETRY_COUNT",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"SERVICE_RETRY_DELAY",{get:function(){return 1e3},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"DATA_PROJECTLOGS_URL",{get:function(){return"/data/projectlogs.json"},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"APPLICATION_NAME",{get:function(){return"Pathway"},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"EMAIL_VALIDATE_REGEXP",{get:function(){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,63}$/},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"NAME_VALIDATE_REGEXP",{get:function(){return/^[A-Za-z][A-Za-z0-9._-]{2,63}( [A-Za-z][A-Za-z0-9._-]{0,63}){1,2}$/},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"PASSWORD_VALIDATE_REGEXP",{get:function(){return/^[a-zA-Z]\w{3,14}$/},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"REST_SERVICE_OPTIONS",{get:function(){return{baseUrl:"//localhost:3000/api",contentType:"application/json",cacheRequest:!0,clientId:"7d65d9b6-5cae-4db7-b19d-56cbdd25eaab",clientSecret:"a0c7b741-b18b-47eb-b6df-48a0bd3cde2e",accessToken:null,refreshToken:null}},enumerable:!0,configurable:!0}),Object.defineProperty(DefaultConfig,"DATA_SERVICE_OPTIONS",{get:function(){return{database:"pathway",stores:{contacts:"++id, firstName, lastName",emails:"++id, contactId, type, email",phones:"++id, contactId, type, phone"}}},enumerable:!0,configurable:!0}),DefaultConfig}(),DevConfig=function(_super){function DevConfig(){_super.apply(this,arguments)}return __extends(DevConfig,_super),DevConfig}(DefaultConfig),ProdConfig=function(_super){function ProdConfig(){_super.apply(this,arguments)}return __extends(ProdConfig,_super),ProdConfig}(DefaultConfig),Config=function(_super){function Config(){_super.apply(this,arguments)}return __extends(Config,_super),Config}(DevConfig),exports_9("Config",Config)}}}),System.register("state/action",[],function(exports_10){"use strict";var Action,StatelessAction,LoginAction,LogoutAction,ValidateUserAction,CreateUserAction,CheckUserAction,AuthorizeAction,RestoreAppStateAction,CreateProjectlogAction,FetchProjectlogAction,DeleteProjectlogAction;return{setters:[],execute:function(){Action=function(){function Action(){}return Action}(),exports_10("Action",Action),StatelessAction=function(){function StatelessAction(){}return StatelessAction}(),exports_10("StatelessAction",StatelessAction),LoginAction=function(_super){function LoginAction(user){_super.call(this),this.user=user}return __extends(LoginAction,_super),LoginAction}(Action),exports_10("LoginAction",LoginAction),LogoutAction=function(_super){function LogoutAction(){_super.apply(this,arguments)}return __extends(LogoutAction,_super),LogoutAction}(Action),exports_10("LogoutAction",LogoutAction),ValidateUserAction=function(_super){function ValidateUserAction(){_super.apply(this,arguments)}return __extends(ValidateUserAction,_super),ValidateUserAction}(Action),exports_10("ValidateUserAction",ValidateUserAction),CreateUserAction=function(_super){function CreateUserAction(user){_super.call(this),this.user=user}return __extends(CreateUserAction,_super),CreateUserAction}(Action),exports_10("CreateUserAction",CreateUserAction),CheckUserAction=function(_super){function CheckUserAction(userId){_super.call(this),this.userId=userId}return __extends(CheckUserAction,_super),CheckUserAction}(StatelessAction),exports_10("CheckUserAction",CheckUserAction),AuthorizeAction=function(_super){function AuthorizeAction(roles){_super.call(this),this.roles=roles}return __extends(AuthorizeAction,_super),AuthorizeAction}(StatelessAction),exports_10("AuthorizeAction",AuthorizeAction),RestoreAppStateAction=function(_super){function RestoreAppStateAction(){_super.apply(this,arguments)}return __extends(RestoreAppStateAction,_super),RestoreAppStateAction}(Action),exports_10("RestoreAppStateAction",RestoreAppStateAction),CreateProjectlogAction=function(_super){function CreateProjectlogAction(projectlog){_super.call(this),this.projectlog=projectlog}return __extends(CreateProjectlogAction,_super),CreateProjectlogAction}(Action),exports_10("CreateProjectlogAction",CreateProjectlogAction),FetchProjectlogAction=function(_super){function FetchProjectlogAction(page){_super.call(this),this.page=page}return __extends(FetchProjectlogAction,_super),FetchProjectlogAction}(Action),exports_10("FetchProjectlogAction",FetchProjectlogAction),DeleteProjectlogAction=function(_super){function DeleteProjectlogAction(projectlog){_super.call(this),this.projectlog=projectlog}return __extends(DeleteProjectlogAction,_super),DeleteProjectlogAction}(Action),exports_10("DeleteProjectlogAction",DeleteProjectlogAction)}}}),System.register("state/dispatcher",["rxjs/Observable","rxjs/Rx","state/action","state/application-state"],function(exports_11){"use strict";var Observable_4,Rx_1,action_1,application_state_1,Dispatcher;return{setters:[function(Observable_4_1){Observable_4=Observable_4_1},function(Rx_1_1){Rx_1=Rx_1_1},function(action_1_1){action_1=action_1_1},function(application_state_1_1){application_state_1=application_state_1_1}],execute:function(){console.log(_,Dexie),Dispatcher=function(){function Dispatcher(initialState){var _this=this;this.subscriptions={},this.state=initialState,this.stateObservable=this.wrapIntoBehaviourSubject(this.makeImmutable(this.state),application_state_1.ApplicationStateObservable.create(function(observer){return _this.stateObserver=observer}).share())}return Dispatcher.stateFactory=function(dispatcher){return dispatcher.stateObservable},Dispatcher.prototype.makeImmutable=function(object){console.time("makeImmutable");var immutable=Immutable.fromJS(object,function(key,value){if(Immutable.Iterable.isIndexed(value))return value.toList();value=value.toObject();var ImmutableObject=Immutable.Record(value);return new ImmutableObject(value)});return console.timeEnd("makeImmutable"),immutable},Dispatcher.prototype.makeMutable=function(object){return object&&(object.toJS?object.toJS():object)},Dispatcher.prototype.wrapIntoBehaviourSubject=function(intialState,observableState){var wrappedSubject=new Rx_1.BehaviorSubject(intialState);return observableState.subscribe(function(s){return wrappedSubject.next(s)}),wrappedSubject},Dispatcher.prototype.mergeAppState=function(state){return state},Dispatcher.prototype.subscribe=function(actions,callback){for(var _i=0,actions_1=actions;_i<actions_1.length;_i++){var action=actions_1[_i],actionIdentity=action.constructor;this.subscriptions[actionIdentity]||(this.subscriptions[actionIdentity]=[]),this.subscriptions[actionIdentity].push(callback)}},Dispatcher.prototype.next=function(action){var _this=this,actionIdentity=action.constructor,statelessAction=action instanceof action_1.StatelessAction,services=this.subscriptions[actionIdentity];return console.log("Action: ",action,", Type:",statelessAction?"stateless":"stateful",", Services: ",(services?services.length:0)+" found."),void 0===services||0===services.length?Observable_4.Observable.empty():Observable_4.Observable.create(function(observer){var observable=Observable_4.Observable.from(services).flatMap(function(service){return service(_this.state,action)}).map(function(state){return statelessAction?(observer.next(state),observer.complete(),state):(console.debug("state changed?:",_this.state===state,JSON.stringify(_this.state)===JSON.stringify(state)),_this.state=state,_this.stateObserver.next(state),state)})["catch"](function(error){return console.error(error),observer.error(error),observer.complete(),Observable_4.Observable.empty()}).skipWhile(function(state,i){return i+1<services.length}).share();observable.subscribe(function(state){observer.next(state),observer.complete()},function(error){observer.error(error),observer.complete()},function(){return observer.complete()})})},Dispatcher}(),exports_11("Dispatcher",Dispatcher)}}}),System.register("util/application-ref",[],function(exports_12){"use strict";var globalApplicationRef,applicationRef;return{setters:[],execute:function(){exports_12("applicationRef",applicationRef=function(appRef){return void 0===appRef&&(appRef=void 0),appRef?globalApplicationRef=appRef:globalApplicationRef})}}}),System.register("service/authorization.service",["angular2/router","state/dispatcher","rxjs/Observable","util/application-ref","state/action"],function(exports_13){"use strict";function authorize(next,previous,roles){var dispatcher=application_ref_1.applicationRef().injector.get(dispatcher_1.Dispatcher),router=application_ref_1.applicationRef().injector.get(router_1.Router);return Observable_5.Observable.create(function(observer){dispatcher.next(new action_2.AuthorizeAction(roles||[])).subscribe(function(ok){ok||router.navigate(["Login",{authorized:!1}]),observer.next(ok),observer.complete()},function(error){observer.error(error),observer.complete()},function(){return observer.complete()})}).toPromise()}var router_1,dispatcher_1,Observable_5,application_ref_1,action_2;return exports_13("authorize",authorize),{setters:[function(router_1_1){router_1=router_1_1},function(dispatcher_1_1){dispatcher_1=dispatcher_1_1},function(Observable_5_1){Observable_5=Observable_5_1},function(application_ref_1_1){application_ref_1=application_ref_1_1},function(action_2_1){action_2=action_2_1}],execute:function(){}}}),System.register("directive/dropdown/dropdown",["angular2/core"],function(exports_14){"use strict";var core_4,Dropdown;return{setters:[function(core_4_1){core_4=core_4_1}],execute:function(){Dropdown=function(){function Dropdown(){this.change=new core_4.EventEmitter,this.showDropdown=!1,this.selectedItem={text:"--select--"}}return Dropdown.prototype.toggleDropdown=function(){this.showDropdown=!this.showDropdown},Dropdown.prototype.selectItem=function(item){var changed=this.selectedItem!==item;this.selectedItem=item,this.hide(),changed&&this.change.next(this.selectedItem)},Dropdown.prototype.hide=function(){this.showDropdown=!1},__decorate([core_4.Input(),__metadata("design:type",Object)],Dropdown.prototype,"selectedItem",void 0),__decorate([core_4.Input(),__metadata("design:type",Array)],Dropdown.prototype,"options",void 0),__decorate([core_4.Output(),__metadata("design:type",Object)],Dropdown.prototype,"change",void 0),Dropdown=__decorate([core_4.Component({selector:"dropdown"}),core_4.View({template:'\n        <div class="dd-item-list" [class.open]="showDropdown">\n          <div class="dd-item" *ngFor="#item of options" (click)="selectItem(item)"> \n                    <span [class]="\'dd-icon \' + item.icon" *ngIf="item.icon !== undefined"></span>\n                    <span class="dd-text">{{item.text}}</span>\n                </div>\n        </div>\n        <div class="dd-input fa" (click)="toggleDropdown()">\n            <span [class]="\'dd-icon \' + selectedItem?.icon"></span>\n            <span class="dd-text">{{selectedItem?.text}}</span>            \n        </div>\n	'}),__metadata("design:paramtypes",[])],Dropdown)}(),exports_14("Dropdown",Dropdown)}}}),System.register("component/header/header.component",["angular2/router","state/dispatcher","state/action","angular2/core","directive/dropdown/dropdown","state/application-state"],function(exports_15){"use strict";var router_2,dispatcher_2,action_3,core_5,dropdown_1,application_state_2,HeaderComponent;return{setters:[function(router_2_1){router_2=router_2_1},function(dispatcher_2_1){dispatcher_2=dispatcher_2_1},function(action_3_1){action_3=action_3_1},function(core_5_1){core_5=core_5_1},function(dropdown_1_1){dropdown_1=dropdown_1_1},function(application_state_2_1){application_state_2=application_state_2_1}],execute:function(){HeaderComponent=function(){function HeaderComponent(router,dispatcher,stateObservable){this.router=router,this.dispatcher=dispatcher,this.stateObservable=stateObservable,this.title="Pathway",this.selectedProject="--select project--",this.showDropdown=!1,this.showMenu=!1,this.openUserProfile=!1,this.projectList=[{text:"Mobile in web",icon:"fa fa-home"},{text:"Angular 2",icon:"fa fa-home"},{text:"TCS SwaS",icon:"fa fa-home"},{text:"dreamUP",icon:"fa fa-home"},{text:"TCS data Tootle",icon:"fa fa-home"}]}return HeaderComponent.prototype.ngOnInit=function(){var _this=this;this.stateObservable.subscribe(function(state){return _this.state=state})},HeaderComponent.prototype.toggleDropdown=function(){this.showDropdown=!this.showDropdown},HeaderComponent.prototype.toggleMenu=function(){this.showMenu=!this.showMenu},HeaderComponent.prototype.selectProject=function(event){this.selectedProject=event.target.innerText},HeaderComponent.prototype.logout=function(){var _this=this;this.dispatcher.next(new action_3.LogoutAction).subscribe(function(){return _this.router.navigate(["/Login"])})},HeaderComponent.prototype.toggleUserProfile=function(){this.openUserProfile=!this.openUserProfile},Object.defineProperty(HeaderComponent.prototype,"userName",{get:function(){return this.state&&this.state.user&&this.state.user.name&&this.state.user.name.split(" ")[0]},enumerable:!0,configurable:!0}),HeaderComponent=__decorate([core_5.Component({selector:"pw-header"}),core_5.View({directives:[dropdown_1.Dropdown],template:'\n		<div class="nav-wrapper" [class.open]="showMenu">\n			<a class="title">\n				<img src="images/logo.svg" width="48">\n				<span href="#">{{title}}</span>\n			</a>\n\n			<span class="right visible-sm">\n				<i class="fa fa-bars" (click)="toggleMenu()"></i>\n			</span>\n\n			<span class="menu right visible-lg" [class.open]="showMenu">\n                \n                <dropdown class="project-list" [options]="projectList"></dropdown>\n\n				<span class="icons">\n					<a class="sync-state fa fa-cloud" [class.syncing]="state.ui.syncing"\n					   [attr.tooltip]="state.ui.syncing ? \'Syncing...\' : \'Synced\'" (click)="state.ui.syncing = !state.ui.syncing"></a>\n					<a class="fa fa-cog"></a>\n                    \n                    <span class="user-profile" [class.open]="openUserProfile" (click)="toggleUserProfile()">\n                        <div class="profile-details">\n                            <div class="user-name">\n                                <span class="name">{{userName}}</span>\n                                <span class="email">{{state.user?.userId}}</span>\n                            </div>\n                            <button class="btn btn-pill btn-primary" (click)="logout()">Logout</button>\n                            <button class="btn btn-pill" disabled>Switch User</button>\n                        </div>\n                        <a class="avatar small"></a>\n                    </span>\n				</span>\n			</span>\n        </div>\n	'}),__metadata("design:paramtypes",[router_2.Router,dispatcher_2.Dispatcher,application_state_2.ApplicationStateObservable])],HeaderComponent)}(),exports_15("HeaderComponent",HeaderComponent)}}}),System.register("component/loader/loader.component",["angular2/core"],function(exports_16){"use strict";var core_6,LoaderComponent;return{setters:[function(core_6_1){core_6=core_6_1}],execute:function(){LoaderComponent=function(){function LoaderComponent(){this.show=!0}return __decorate([core_6.Input(),__metadata("design:type",Boolean)],LoaderComponent.prototype,"show",void 0),LoaderComponent=__decorate([core_6.Component({selector:"pw-loader"}),core_6.View({template:'\n		<div class="sk-circle" [class.show]="show">\n			<div class="sk-circle1 sk-child"></div>\n			<div class="sk-circle2 sk-child"></div>\n			<div class="sk-circle3 sk-child"></div>\n			<div class="sk-circle4 sk-child"></div>\n			<div class="sk-circle5 sk-child"></div>\n			<div class="sk-circle6 sk-child"></div>\n			<div class="sk-circle7 sk-child"></div>\n			<div class="sk-circle8 sk-child"></div>\n			<div class="sk-circle9 sk-child"></div>\n			<div class="sk-circle10 sk-child"></div>\n			<div class="sk-circle11 sk-child"></div>\n			<div class="sk-circle12 sk-child"></div>\n		</div>\n	'}),__metadata("design:paramtypes",[])],LoaderComponent)}(),exports_16("LoaderComponent",LoaderComponent)}}}),System.register("directive/scroller/scroller",[],function(exports_17){"use strict";var Scroller;return{setters:[],execute:function(){Scroller=function(){function Scroller($window,$interval,$elementRef,infiniteScrollCallback,infiniteScrollDistance,infiniteScrollParent){var THROTTLE_MILLISECONDS=300;this.windowElement=$window,this.infiniteScrollCallback=infiniteScrollCallback,this.$interval=$interval,this.$elementRef=$elementRef,null!=THROTTLE_MILLISECONDS&&(this.handler=this.throttle(this.handler,THROTTLE_MILLISECONDS)),this.handleInfiniteScrollDistance(infiniteScrollDistance);var _self=this;this.handleInfiniteScrollDisabled(!1),this.changeContainer(_self.windowElement),this.checkInterval=setInterval(function(){return _self.immediateCheck?_self.handler():void 0},0)}return Scroller.prototype.height=function(elem){return isNaN(elem.offsetHeight)?elem.document.documentElement.clientHeight:elem.offsetHeight},Scroller.prototype.offsetTop=function(elem){return elem.getBoundingClientRect?elem.getBoundingClientRect().top+this.pageYOffset(elem):void 0},Scroller.prototype.pageYOffset=function(elem){return isNaN(window.pageYOffset)?elem.document.documentElement.scrollTop:elem.ownerDocument.defaultView.pageYOffset},Scroller.prototype.handler=function(){var containerBottom,containerTopOffset,elementBottom,remaining,shouldScroll;return this.container===this.windowElement?(containerBottom=this.height(this.container)+this.pageYOffset(this.container.document.documentElement),elementBottom=this.offsetTop(this.$elementRef.nativeElement)+this.height(this.$elementRef.nativeElement)):(containerBottom=this.height(this.container),containerTopOffset=0,void 0!==this.offsetTop(this.container)&&(containerTopOffset=this.offsetTop(this.container)),elementBottom=this.offsetTop(this.$elementRef.nativeElement)-containerTopOffset+this.height(this.$elementRef.nativeElement)),this.useDocumentBottom&&(elementBottom=this.height((this.$elementRef.nativeElement.ownerDocument||this.$elementRef.nativeElement.document).documentElement)),remaining=elementBottom-containerBottom,(shouldScroll=remaining<=this.height(this.container)*this.scrollDistance+1)?(this.checkWhenEnabled=!0,void(this.scrollEnabled&&this.infiniteScrollCallback())):(this.checkInterval&&clearInterval(this.checkInterval),this.checkWhenEnabled=!1)},Scroller.prototype.throttle=function(func,wait){var later,previous,timeout,_self=this;return timeout=null,previous=0,later=function(){var context;return previous=(new Date).getTime(),clearInterval(timeout),timeout=null,func.call(_self),context=null},function(){var now,remaining;return now=(new Date).getTime(),remaining=wait-(now-previous),0>=remaining?(clearTimeout(timeout),clearInterval(timeout),timeout=null,previous=now,func.call(_self)):timeout?void 0:timeout=_self.$interval(later,remaining,1)}},Scroller.prototype.handleInfiniteScrollDistance=function(v){return this.scrollDistance=parseFloat(v)||0},Scroller.prototype.changeContainer=function(newContainer){return this.container=newContainer,null!=newContainer?this.container.addEventListener("scroll",this.handler.bind(this)):void 0;
},Scroller.prototype.handleInfiniteScrollDisabled=function(v){this.scrollEnabled=!v},Scroller}(),exports_17("Scroller",Scroller)}}}),System.register("directive/scroller/infinite-scroller",["angular2/core","directive/scroller/scroller"],function(exports_18){"use strict";var core_7,scroller_1,InfiniteScroller;return{setters:[function(core_7_1){core_7=core_7_1},function(scroller_1_1){scroller_1=scroller_1_1}],execute:function(){InfiniteScroller=function(){function InfiniteScroller(element){this.element=element,this.scrolled=new core_7.EventEmitter}return Object.defineProperty(InfiniteScroller.prototype,"infiniteScrollDistance",{set:function(distance){this._distance=distance},enumerable:!0,configurable:!0}),InfiniteScroller.prototype.ngOnInit=function(){this.scroller=new scroller_1.Scroller(window,setInterval,this.element,this.onScroll.bind(this),this._distance,{})},InfiniteScroller.prototype.onScroll=function(){this.scrolled.next({})},__decorate([core_7.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],InfiniteScroller.prototype,"infiniteScrollDistance",null),__decorate([core_7.Output(),__metadata("design:type",Object)],InfiniteScroller.prototype,"scrolled",void 0),InfiniteScroller=__decorate([core_7.Directive({selector:"[infinite-scroll]"}),__metadata("design:paramtypes",[core_7.ElementRef])],InfiniteScroller)}(),exports_18("InfiniteScroller",InfiniteScroller)}}}),System.register("directive/dialog/dialog-box",["angular2/core"],function(exports_19){"use strict";var core_8,DialogBox;return{setters:[function(core_8_1){core_8=core_8_1}],execute:function(){DialogBox=function(){function DialogBox(){this.title=null,this.showTitle=!1,this.autoHide=new core_8.EventEmitter,this.show=!0}return DialogBox.prototype.hide=function(){this.show=!1,this.autoHide.next(this.show)},__decorate([core_8.Input(),__metadata("design:type",Boolean)],DialogBox.prototype,"show",void 0),__decorate([core_8.Input(),__metadata("design:type",String)],DialogBox.prototype,"title",void 0),__decorate([core_8.Input(),__metadata("design:type",Boolean)],DialogBox.prototype,"showTitle",void 0),__decorate([core_8.Output(),__metadata("design:type",Object)],DialogBox.prototype,"autoHide",void 0),DialogBox=__decorate([core_8.Component({selector:"dialog-box"}),core_8.View({template:'\n		<div class="dialog" [class.open]="show" [class.no-title]="!showTitle">\n			<div class="overlay" (click)="hide()"></div>\n			<div class="dialog-body">\n					<div class="dialog-header">{{title}}</div>\n					<div class="dialog-content">\n						<ng-content></ng-content>\n					</div>\n			</div>\n		</div>\n	'}),__metadata("design:paramtypes",[])],DialogBox)}(),exports_19("DialogBox",DialogBox)}}}),System.register("component/uploader/uploader.component",["state/config","directive/dialog/dialog-box","component/loader/loader.component","angular2/core"],function(exports_20){"use strict";var config_1,dialog_box_1,loader_component_1,core_9,UploadStatus,UploaderComponent;return{setters:[function(config_1_1){config_1=config_1_1},function(dialog_box_1_1){dialog_box_1=dialog_box_1_1},function(loader_component_1_1){loader_component_1=loader_component_1_1},function(core_9_1){core_9=core_9_1}],execute:function(){!function(UploadStatus){UploadStatus[UploadStatus.UPLOADING=0]="UPLOADING",UploadStatus[UploadStatus.UPLOADED=1]="UPLOADED",UploadStatus[UploadStatus.UPLOAD_FAILED=2]="UPLOAD_FAILED",UploadStatus[UploadStatus.CLEARING=3]="CLEARING",UploadStatus[UploadStatus.CLEARED=4]="CLEARED",UploadStatus[UploadStatus.CLEAR_FAILED=5]="CLEAR_FAILED",UploadStatus[UploadStatus.DEFAULT=6]="DEFAULT"}(UploadStatus||(UploadStatus={})),UploaderComponent=function(){function UploaderComponent(){this.autoHide=new core_9.EventEmitter,this.status=UploadStatus.DEFAULT,this.serverUrl="",this.dataEndpoint="",this.sampleDataUrl=config_1.Config.DATA_PROJECTLOGS_URL,this.show=!0}return UploaderComponent.prototype.partition=function(items,size){for(var p=[],i=Math.floor(items.length/size);i-- >0;)p[i]=items.slice(i*size,(i+1)*size);return p},UploaderComponent.prototype.upload=function(){var _this=this;this.status=UploadStatus.UPLOADING,this.service.fetch(this.sampleDataUrl).map(function(res){return res.json()}).flatMap(function(data){return _this.partition(data,100)}).subscribe(function(data){console.log(data),_this.service.createOrUpdate(_this.dataEndpoint,data).subscribe(function(){return _this.status=UploadStatus.UPLOADED},function(){return _this.status=UploadStatus.UPLOAD_FAILED})},function(){return _this.status=UploadStatus.UPLOAD_FAILED})},UploaderComponent.prototype.clear=function(){var _this=this;this.status=UploadStatus.CLEARING,this.service["delete"](this.dataEndpoint).subscribe(function(){return _this.status=UploadStatus.CLEARED},function(){return _this.status=UploadStatus.CLEAR_FAILED})},UploaderComponent.prototype.close=function(){this.status=UploadStatus.DEFAULT,this.show=!1,this.autoHide.next(this.show)},UploaderComponent.prototype.onAutoHide=function(){this.status=UploadStatus.DEFAULT,this.show=!1,this.autoHide.next(this.show)},__decorate([core_9.Input(),__metadata("design:type",Boolean)],UploaderComponent.prototype,"show",void 0),__decorate([core_9.Output(),__metadata("design:type",Object)],UploaderComponent.prototype,"autoHide",void 0),UploaderComponent=__decorate([core_9.Component({selector:"pw-uploader"}),core_9.View({directives:[dialog_box_1.DialogBox,loader_component_1.LoaderComponent],template:'\n		<dialog-box [title]="\'Data Setup Wizard\'" [showTitle]="true" [show]="show" (autoHide)="onAutoHide()">\n				<div class="dialog-message" [ngSwitch]="status">\n		      <span *ngSwitchWhen="0">\n						<pw-loader></pw-loader>\n						<div class="status-message"> Uploading sample data... Please wait. </div>\n					</span>\n\n		      <span *ngSwitchWhen="1">\n						<div class="status-message">\n							<i class="fa fa-check"></i> Sample data uploaded.\n						</div>\n						Hit <b> <a href="{{dataEndpoint}}" target="_blank"> {{dataEndpoint}}</a></b> to see them.\n					</span>\n\n					<span *ngSwitchWhen="2">\n						<div class="status-message error-message">\n							<i class="fa fa-exclamation-triangle"></i>\n								Upload failed due to an unknown error!\n						</div>\n						Please try again later. Make sure elasticsearch is running,\n						<b><a href="{{serverUrl}}" target="_blank">{{serverUrl}}</a></b> and\n						<b><a href="{{sampleDataUrl}}" target="_blank">{{sampleDataUrl}}</a></b> are accessible!\n					</span>\n\n					<span *ngSwitchWhen="3">\n						<pw-loader></pw-loader>\n						<div class="status-message"> Clearing sample data... Please wait. </div>\n					</span>\n\n		      <span *ngSwitchWhen="4">\n						<div class="status-message">\n					 		<i class="fa fa-check"></i> Data cleared.\n						</div>\n						 Accessing <b>\n						<a href="{{dataEndpoint}}" target="_blank">\n							{{dataEndpoint}}</a></b> should return an empty array.\n					</span>\n\n					<span *ngSwitchWhen="5">\n						<div class="status-message error-message">\n							<i class="fa fa-exclamation-triangle"></i> Could not clear data due to an error!\n						</div>\n						Accessing <b>\n						<a href="{{dataEndpoint}}" target="_blank">{{dataEndpoint}}</a></b> should return <span class="code">404</span>\n						if data was cleared or was never created.\n					</span>\n\n		      <span *ngSwitchDefault>\n						<ul>\n							<li>\n								Click on <b>Upload</b> button to load sample data into elasticsearch db. Make sure elasticsearch is\n								running, <b><a href="{{serverUrl}}" target="_blank">{{serverUrl}}</a></b> is accessible,\n								and sample data avaiable at <b><a href="{{sampleDataUrl}}" target="_blank">{{sampleDataUrl}}</a></b><br>\n							</li>\n							<li>\n								Click on <b>Clear</b> button to clear all the data from elasticsearch db.\n								You can use this option for a fresh start\n							</li>\n						</ul>\n					</span>\n				</div>\n\n				<div class="dialog-footer">\n					<div class="btn btn-pill"\n							[class.btn-disabled]="status === 0 || status === 3"\n							(click)="upload()">\n						<i class="fa fa-upload"></i> Upload\n					</div>\n					<div class="btn btn-pill btn-primary"\n							[class.btn-disabled]="status === 0 || status === 3"\n							(click)="clear()">\n						<i class="fa fa-trash"></i> Clear\n					</div>\n					<div class="btn btn-pill" (click)="close()">\n						<i class="fa fa-times"></i> Close\n					</div>\n				</div>\n		</dialog-box>\n	'}),__metadata("design:paramtypes",[])],UploaderComponent)}(),exports_20("UploaderComponent",UploaderComponent)}}}),System.register("directive/content/content",["angular2/core"],function(exports_21){"use strict";var core_10,Content;return{setters:[function(core_10_1){core_10=core_10_1}],execute:function(){Content=function(){function Content(elementRef){this.elementRef=elementRef,this.change=new core_10.EventEmitter,this.updateend=new core_10.EventEmitter}return Object.defineProperty(Content.prototype,"editMode",{get:function(){return this._editMode},set:function(editMode){this._editMode=editMode,this._editMode&&this.elementRef.nativeElement.focus()},enumerable:!0,configurable:!0}),Content.prototype.handlePaste=function(event){if(this.plainTextOnly)(13===event.keyCode||"paste"===event.type)&&setTimeout(function(){event.target.innerHTML=event.target.innerText},0);else if(13===event.keyCode)return!0},Content.prototype.publishChange=function(event){this.change.next(this.plainTextOnly?event.target.innerText:event.target.innerHTML)},Content.prototype.publishUpdateEnd=function(event){this.updateend.next(this.plainTextOnly?event.target.innerText:event.target.innerHTML)},Content.prototype.switchToEditMode=function(){this.editOnClick&&(this.editMode=!0)},__decorate([core_10.Input(),__metadata("design:type",Boolean)],Content.prototype,"plainTextOnly",void 0),__decorate([core_10.Input(),__metadata("design:type",Boolean)],Content.prototype,"editOnClick",void 0),__decorate([core_10.Output(),__metadata("design:type",core_10.EventEmitter)],Content.prototype,"change",void 0),__decorate([core_10.Output(),__metadata("design:type",core_10.EventEmitter)],Content.prototype,"updateend",void 0),__decorate([core_10.Input(),__metadata("design:type",Boolean)],Content.prototype,"editMode",null),Content=__decorate([core_10.Component({selector:"content",host:{"[attr.contenteditable]":"editMode","(paste)":"handlePaste($event)","(keydown)":"handlePaste($event)","(keyup)":"publishChange($event)","(focusout)":"publishUpdateEnd($event)","(click)":"switchToEditMode()"}}),core_10.View({template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[core_10.ElementRef])],Content)}(),exports_21("Content",Content)}}}),System.register("component/projectlog/projectlog-item.component",["directive/content/content","directive/dropdown/dropdown","angular2/core"],function(exports_22){"use strict";var content_1,dropdown_2,core_11,ProjectlogItemComponent;return{setters:[function(content_1_1){content_1=content_1_1},function(dropdown_2_1){dropdown_2=dropdown_2_1},function(core_11_1){core_11=core_11_1}],execute:function(){ProjectlogItemComponent=function(){function ProjectlogItemComponent(){this.changed=!1,this.beforeChange={title:"",description:""},this.statusOptions=[{text:"new",icon:"fa fa-star"},{text:"doing",icon:"fa fa-refresh"},{text:"done",icon:"fa fa-check"},{text:"hold",icon:"fa fa-hand-grab-o"}],this.statusUpdate=new core_11.EventEmitter}return ProjectlogItemComponent.prototype.fireStatusUpdate=function(){this.statusUpdate.next(this.item)},Object.defineProperty(ProjectlogItemComponent.prototype,"item",{get:function(){return this._item},set:function(value){this._item=value,this._item.uiState={open:!1,selected:!1,editMode:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(ProjectlogItemComponent.prototype,"statusItem",{get:function(){for(var _i=0,_a=this.statusOptions;_i<_a.length;_i++){var item=_a[_i];if(item.text===this.item.status)return item}},enumerable:!0,configurable:!0}),ProjectlogItemComponent.prototype.toggleOpen=function(event){event.stopPropagation(),this.item.uiState.editMode||(this.item.uiState.open=!this.item.uiState.open,this.fireStatusUpdate())},ProjectlogItemComponent.prototype.toggleSelection=function(event){event.stopPropagation(),this.item.uiState.selected=!this.item.uiState.selected,this.fireStatusUpdate()},ProjectlogItemComponent.prototype.toggleEdit=function(event){event.stopPropagation(),this.item.uiState.editMode?this.changed&&(console.warn("The changes are lost!"),this.item.title=this.beforeChange.title,this.item.description=this.beforeChange.description):(this.changed=!1,this.beforeChange={title:this.item.title,description:this.item.description}),this.item.uiState.editMode=!this.item.uiState.editMode},ProjectlogItemComponent.prototype.save=function(){},ProjectlogItemComponent.prototype.switchToEditMode=function(event){event.stopPropagation(),this.item.uiState.editMode||(this.item.uiState.open=!0,this.toggleEdit(event))},ProjectlogItemComponent.prototype.preventEvent=function(event){event.stopPropagation()},ProjectlogItemComponent.prototype.processKeypress=function(event){console.log(event.which),27===event.which&&this.toggleEdit(event)},__decorate([core_11.Output(),__metadata("design:type",core_11.EventEmitter)],ProjectlogItemComponent.prototype,"statusUpdate",void 0),__decorate([core_11.Input(),__metadata("design:type",Object)],ProjectlogItemComponent.prototype,"item",null),ProjectlogItemComponent=__decorate([core_11.Component({selector:"pw-projectlog-item"}),core_11.View({directives:[content_1.Content,dropdown_2.Dropdown],template:'\n		<div class="list-item" \n            (click)="toggleOpen($event)" \n            [class.open]="item.uiState.open"\n			[class.selected-item]="item.uiState.selected" \n            [class.edit-mode]="item.uiState.editMode"\n            (keyup)="processKeypress($event)" >\n			\n            <!-- the list item-->\n			<div class="avatar fa" (click)="toggleSelection($event)">{{item.title?.substr(0, 1).toUpperCase()}}</div>\n\n			<div class="content">\n				<div class="heading-row">\n                    <content class="heading"\n                            [editMode]="item.uiState.editMode"\n                            [plainTextOnly]="true"\n                            [editOnClick]="true"\n                            (updateend)="item.title = $event; changed = true;"\n                            (click)="switchToEditMode($event)">{{item.title}}</content>\n				</div>\n\n				<div class="text">\n                    \n                    <span class="index">{{item.index}}</span>\n                    \n					<dropdown class="status"\n                            [class.grey-text]="item.status === \'hold\'"\n                            [class.blue-grey-text]="item.status === \'done\'"\n                            [class.green-text]="item.status === \'doing\'"\n                            [class.yellow-text]="item.status === \'new\'"\n                            [selectedItem]="statusItem"\n                            [options]="statusOptions"\n                            (click)="preventEvent($event)" \n                            (change)="item.status = $event.text"></dropdown>\n                     \n				 	<div class="id">{{item.id}}</div>\n                   \n				</div>\n\n				<content class="description"\n                        [editMode]="item.uiState.editMode"\n                        (updateend)="item.description = $event; changed = true"\n                        (click)="switchToEditMode($event)" [innerHTML]="item.description"></content>\n			</div>\n			<div class="action-bar">\n				<a class="btn btn-round btn-primary fa fa-edit" (click)="toggleEdit($event)"></a>\n				<a class="btn btn-round fa fa-save" (click)="save()"></a>\n				<a class="btn btn-round fa fa-trash"></a>\n			</div>\n		</div>\n	'}),__metadata("design:paramtypes",[])],ProjectlogItemComponent)}(),exports_22("ProjectlogItemComponent",ProjectlogItemComponent)}}}),System.register("component/projectlog/projectlog.component",["state/pagination","state/dispatcher","angular2/core","component/loader/loader.component","directive/scroller/infinite-scroller","component/uploader/uploader.component","component/projectlog/projectlog-item.component","state/application-state","state/action"],function(exports_23){"use strict";var pagination_2,dispatcher_3,core_12,loader_component_2,infinite_scroller_1,uploader_component_1,projectlog_item_component_1,application_state_3,action_4,ProjectlogComponent;return{setters:[function(pagination_2_1){pagination_2=pagination_2_1},function(dispatcher_3_1){dispatcher_3=dispatcher_3_1},function(core_12_1){core_12=core_12_1},function(loader_component_2_1){loader_component_2=loader_component_2_1},function(infinite_scroller_1_1){infinite_scroller_1=infinite_scroller_1_1},function(uploader_component_1_1){uploader_component_1=uploader_component_1_1},function(projectlog_item_component_1_1){projectlog_item_component_1=projectlog_item_component_1_1},function(application_state_3_1){application_state_3=application_state_3_1},function(action_4_1){action_4=action_4_1}],execute:function(){ProjectlogComponent=function(){function ProjectlogComponent(dispatcher,stateObservable){this.dispatcher=dispatcher,this.stateObservable=stateObservable,this.selectedCount=0,this.selectAllOn=!1,this.sortAsc=!0,this.showUploader=!1,this.loading=!1}return ProjectlogComponent.prototype.ngOnInit=function(){var _this=this;this.stateObservable.subscribe(function(state){return _this.state=state})},ProjectlogComponent.prototype.create=function(){console.log("Create is yet to be implemented"),this.dispatcher.next(new action_4.CreateProjectlogAction(null))},ProjectlogComponent.prototype.refresh=function(){this.loading=!0,this.error=void 0,this.fetchPageAction.next(new pagination_2.Page(0).setFilters(this.filters))},ProjectlogComponent.prototype.nextPage=function(){return this.loading?null:(this.loading=!0,this.error=void 0,void this.fetchPageAction.next(this.state.projectlogs.page.next()))},ProjectlogComponent.prototype.requestPage=function(page){var _this=this;console.log("request:",page),this.dispatcher.next(new action_4.FetchProjectlogAction(page))["finally"](function(){_this.loading=!1}).subscribe(function(state){console.log("response:",_this.state.projectlogs.page)},function(error){_this.error="Error occured",console.error("error",error)})},Object.defineProperty(ProjectlogComponent.prototype,"filters",{get:function(){return{sort:{index:{order:this.sortAsc?"asc":"desc"}}}},enumerable:!0,configurable:!0}),ProjectlogComponent.prototype.showUploadPopup=function(){this.showUploader=!0},ProjectlogComponent.prototype.toggleAll=function(){this.selectAllOn=!this.selectAllOn},ProjectlogComponent.prototype.toggleSort=function(){this.sortAsc=!this.sortAsc,this.refresh()},ProjectlogComponent.prototype.onItemUpdate=function(item){this.selectedCount+=item.uiState.selected?1:-1},ProjectlogComponent.prototype.deleteSelected=function(){this.dispatcher.next(new action_4.DeleteProjectlogAction(null))},ProjectlogComponent=__decorate([core_12.Component({selector:"pw-projectlog"}),core_12.View({directives:[projectlog_item_component_1.ProjectlogItemComponent,loader_component_2.LoaderComponent,uploader_component_1.UploaderComponent,infinite_scroller_1.InfiniteScroller],template:'\n\n		<!-- action buttons -->\n		<div class="actions">\n			<a class="btn btn-round fa fa-plus" tooltip="Add story" (click)="create()"></a>\n			<a class="btn btn-round fa fa-trash" tooltip="Delete stories" (click)="deleteSelected()"></a>\n			<a class="btn btn-round fa fa-check" tooltip="Toggle selection" (click)="toggleAll()"\n			[class.selected]="selectAllOn"></a>\n			<a class="btn btn-round fa fa-refresh" tooltip="Toggle spinner" (click)="refresh()"></a>\n			<a class="btn btn-round fa fa-upload" tooltip="Upload sample data" (click)="showUploadPopup()"></a>\n			<a class="btn btn-round fa fa-sort-numeric-asc" [class.desc]="!sortAsc" tooltip="Sort" (click)="toggleSort()"></a>\n		</div>\n\n		<div class="separator"></div>\n\n		<!-- the list -->\n		<div class="list" [class.loading]="loading" infinite-scroll [infiniteScrollDistance]="2" (scrolled)="nextPage()">\n\n			<!-- the list item-->\n			<pw-projectlog-item *ngFor="#item of state.projectlogs.list" [item]="item" (update)="onItemUpdate($event)">\n			</pw-projectlog-item>\n\n			<!-- list loader -->\n			<div class="list-item loader">\n				<pw-loader></pw-loader>\n			</div>\n\n		</div> <!-- end of list -->\n\n		<div class="error-message" *ngIf="error != undefined"><i class="fa fa-exclamation-triangle"></i> {{error}}</div>\n		<pw-uploader [show]="showUploader" (autoHide)="showUploader = false"> </pw-uploader>\n\n		<div class="foot-note">{{state.projectlogs?.list?.size}} of {{state.projectlogs?.page?.totalItems}}</div>\n	'}),__metadata("design:paramtypes",[dispatcher_3.Dispatcher,application_state_3.ApplicationStateObservable])],ProjectlogComponent)}(),exports_23("ProjectlogComponent",ProjectlogComponent)}}}),System.register("component/main/main.component",["state/user","service/authorization.service","component/header/header.component","angular2/core","component/projectlog/projectlog.component","angular2/router"],function(exports_24){"use strict";var user_1,authorization_service_1,header_component_1,core_13,projectlog_component_1,router_3,MainComponent;return{setters:[function(user_1_1){user_1=user_1_1},function(authorization_service_1_1){authorization_service_1=authorization_service_1_1},function(header_component_1_1){header_component_1=header_component_1_1},function(core_13_1){core_13=core_13_1},function(projectlog_component_1_1){projectlog_component_1=projectlog_component_1_1},function(router_3_1){router_3=router_3_1}],execute:function(){MainComponent=function(){function MainComponent(){}return MainComponent=__decorate([core_13.Component({selector:"pw-main"}),router_3.CanActivate(function(next,prev){return authorization_service_1.authorize(next,prev,[user_1.Role.USER])}),core_13.View({directives:[header_component_1.HeaderComponent,projectlog_component_1.ProjectlogComponent,router_3.ROUTER_DIRECTIVES],template:"\n		<pw-header></pw-header>\n		<main>\n			<pw-projectlog></pw-projectlog>\n		</main>\n		<footer>\n			Pathway™ - Powered by Angular 2. © 2016 Copyright rintoj (Rinto Jose).\n		</footer>\n	"}),__metadata("design:paramtypes",[])],MainComponent)}(),exports_24("MainComponent",MainComponent)}}}),System.register("component/login/login.component",["state/config","state/dispatcher","state/action","angular2/core","component/loader/loader.component","angular2/common","angular2/router"],function(exports_25){"use strict";var config_2,dispatcher_4,action_5,core_14,loader_component_3,common_1,router_4,LoginComponent;return{setters:[function(config_2_1){config_2=config_2_1},function(dispatcher_4_1){dispatcher_4=dispatcher_4_1},function(action_5_1){action_5=action_5_1},function(core_14_1){core_14=core_14_1},function(loader_component_3_1){loader_component_3=loader_component_3_1},function(common_1_1){common_1=common_1_1},function(router_4_1){router_4=router_4_1}],execute:function(){LoginComponent=function(){function LoginComponent(router,routeParams,builder,dispatcher){this.router=router,this.routeParams=routeParams,this.builder=builder,this.dispatcher=dispatcher,this.title=config_2.Config.APPLICATION_NAME,this.loading=!1,this.validating=!0}return LoginComponent.prototype.ngOnInit=function(){this.userId=new common_1.Control("",common_1.Validators.compose([common_1.Validators.required,this.validEmail])),this.password=new common_1.Control("",common_1.Validators.required),this.loginForm=this.builder.group({userId:this.userId,password:this.password})},LoginComponent.prototype.routerOnActivate=function(){"false"===this.routeParams.get("authorized")&&(this.errorMessage="You are not authorized or session expired! Login again."),this.validateAuth(!0)},LoginComponent.prototype.validateAuth=function(noError){var _this=this;void 0===noError&&(noError=!1),this.dispatcher.next(new action_5.ValidateUserAction)["finally"](function(){return _this.validating=!1}).subscribe(function(data){_this.router.navigate([_this.routeParams.get("callback")||"/Home"])},function(error){_this.loading=!1,noError||(_this.errorMessage="Invalid user or password!")})},LoginComponent.prototype.onSubmit=function(){var _this=this;return this.loading=!0,this.errorMessage=void 0,this.dispatcher.next(new action_5.LoginAction({userId:this.userId.value,password:btoa(this.password.value)})).subscribe(function(){_this.loading=!1,_this.validateAuth()},function(error){_this.loading=!1,_this.errorMessage="Invalid user or password!"},function(){_this.loading=!1}),null},LoginComponent.prototype.validEmail=function(control){return config_2.Config.EMAIL_VALIDATE_REGEXP.test(control.value)?null:{validEmail:!0}},LoginComponent=__decorate([core_14.Component({selector:"pw-login"}),core_14.View({directives:[loader_component_3.LoaderComponent,router_4.ROUTER_DIRECTIVES],template:'\n		<form class="login-container" [class.validating]="validating" (ngSubmit)="onSubmit()" [ngFormModel]="loginForm">\n        	<div class="title">\n				<i class="avatar"></i>\n			</div>\n            <div class="message-container">\n                <pw-loader [show]="loading || validating"></pw-loader>\n                <div class="error-message dynamic-text login-message" [class.show]="errorMessage">\n                    {{errorMessage}}\n                </div>\n            </div>\n            <div class="input-container">\n			    <i class="fa fa-envelope"></i> \n                <input type="text" placeholder="Enter your email" ngControl="userId" autofocus [disabled]="loading || validating">\n                <div class="foot-note error-message dynamic-text" \n                    [class.show]="userId.touched && userId.errors !== null">Valid email is required.</div>\n            </div>\n            <div class="input-container">\n                <i class="fa fa-key"></i> \n                <input type="password" placeholder="Enter your password" ngControl="password" [disabled]="loading || validating">\n                <div class="foot-note error-message dynamic-text" \n                    [class.show]="password.touched && password.errors !== null">Password is required!</div>\n            </div>\n            <div class="input-container">\n                <button type="submit" \n                    class="btn submit-btn" \n                    [disabled]="!loginForm.valid || loading || validating">Login</button>\n            </div>\n            <div class="signup-btn">\n                <a [routerLink]="[\'Register\']">Create account</a> | <a>Help</a>\n            </div>\n            <footer>\n			    <span>Pathway™ - Powered by Angular 2.</span> <span>© 2016 Copyright rintoj (Rinto Jose).</span>\n		    </footer>\n		</form>        \n	'}),__metadata("design:paramtypes",[router_4.Router,router_4.RouteParams,common_1.FormBuilder,dispatcher_4.Dispatcher])],LoginComponent)}(),exports_25("LoginComponent",LoginComponent)}}}),System.register("component/login/register.component",["state/config","rxjs/Observable","state/dispatcher","component/loader/loader.component","angular2/core","state/action","angular2/router","state/application-state","angular2/common"],function(exports_26){"use strict";var config_3,Observable_6,dispatcher_5,loader_component_4,core_15,action_6,action_7,router_5,application_state_4,common_2,RegisterComponent;return{setters:[function(config_3_1){config_3=config_3_1},function(Observable_6_1){Observable_6=Observable_6_1},function(dispatcher_5_1){dispatcher_5=dispatcher_5_1},function(loader_component_4_1){loader_component_4=loader_component_4_1},function(core_15_1){core_15=core_15_1},function(action_6_1){action_6=action_6_1,action_7=action_6_1},function(router_5_1){router_5=router_5_1},function(application_state_4_1){application_state_4=application_state_4_1},function(common_2_1){common_2=common_2_1}],execute:function(){RegisterComponent=function(){function RegisterComponent(builder,dispatcher,stateObservable){this.builder=builder,this.dispatcher=dispatcher,this.stateObservable=stateObservable,this.title=config_3.Config.APPLICATION_NAME,this.loading=!1}return RegisterComponent.prototype.ngOnInit=function(){var _this=this;this.stateObservable.subscribe(function(state){return _this.state=state}),this.name=new common_2.Control("Rinto Jose",common_2.Validators.compose([common_2.Validators.required,this.isValidName])),this.userId=new common_2.Control("rintoj@gmail.com",common_2.Validators.compose([common_2.Validators.required,this.isValidEmail]),this.isUserIdTaken.bind(this)),this.password=new common_2.Control("password",common_2.Validators.compose([common_2.Validators.required,this.isValidPassword.bind(this)])),this.confirmation=new common_2.Control("password",common_2.Validators.compose([common_2.Validators.required])),this.passwordGroup=this.builder.group({password:this.password,confirmation:this.confirmation},{validator:this.checkIfEqual.bind(this)}),this.loginForm=this.builder.group({name:this.name,userId:this.userId,passwordGroup:this.passwordGroup})},RegisterComponent.prototype.onSubmit=function(){var _this=this;this.loading=!0,this.dispatcher.next(new action_6.CreateUserAction({name:this.name.value,userId:this.userId.value,password:btoa(this.password.value)})).subscribe(function(){_this.loading=!1,_this.errorMessage="User created!"},function(error){_this.loading=!1,409===error.status?_this.errorMessage="User is already registered!":_this.errorMessage="Sorry, could not create user!"},function(){_this.loading=!1})},RegisterComponent.prototype.isValidName=function(control){return config_3.Config.NAME_VALIDATE_REGEXP.test(control.value.trim())?null:{invalidEmail:!0}},RegisterComponent.prototype.isUserIdTaken=function(control){var _this=this;return Observable_6.Observable.create(function(observer){_this.dispatcher.next(new action_7.CheckUserAction(control.value)).subscribe(function(data){observer.next(data.length>0?{userIdTaken:!0}:null),observer.complete()},function(error){observer.next(null),observer.complete()},function(){return observer.complete()})}).share()},RegisterComponent.prototype.isValidEmail=function(control){return config_3.Config.EMAIL_VALIDATE_REGEXP.test(control.value)?null:{invalidEmail:!0}},RegisterComponent.prototype.isValidPassword=function(control){return config_3.Config.PASSWORD_VALIDATE_REGEXP.test(control.value)?null:{invalidPassword:!0}},RegisterComponent.prototype.checkIfEqual=function(group){return this.password&&this.confirmation?this.password.value===this.confirmation.value?null:{notEqual:!0}:null},RegisterComponent=__decorate([core_15.Component({selector:"pw-register"}),core_15.View({directives:[router_5.ROUTER_DIRECTIVES,loader_component_4.LoaderComponent],template:'\n		<form class="login-container" (ngSubmit)="onSubmit()" [ngFormModel]="loginForm">\n        	<div class="title">\n				<i class="avatar"></i>\n			</div>\n             <div class="message-container">\n                <pw-loader [show]="loading || validating"></pw-loader>\n                <div class="error-message dynamic-text login-message" [class.show]="errorMessage">\n                    {{errorMessage}}\n                </div>\n            </div>\n             <div class="input-container">\n			    <i class="fa fa-user-secret"></i> \n                <input type="text" placeholder="Enter your name" ngControl="name">\n                <div class="foot-note error-message dynamic-text" \n                    [class.show]="name.touched && name.errors !== null">Valid full name is required.</div>\n            </div>\n            <div class="input-container">\n			    <i class="fa fa-envelope"></i> \n                <input type="text" placeholder="Enter your email" ngControl="userId">\n                <div class="foot-note error-message dynamic-text" \n                    [class.show]="userId.touched && userId.errors !== null && !userId.errors.userIdTaken">Valid email is required.</div>\n                <div class="foot-note error-message dynamic-text" \n                    [class.show]="userId.errors !== null && userId.errors.userIdTaken">\n                    This id is already taken.</div>\n            </div>\n            <span ngControlGroup="passwordGroup">\n              <div class="input-container">\n                  <i class="fa fa-key"></i> \n                  <input type="password" placeholder="Enter your password" ngControl="password">\n                  <div class="foot-note error-message dynamic-text" \n                      [class.show]="password.touched && password.errors !== null">\n                      Password Policy: The password\'s first character must be a letter, it must contain at least 4 characters and no more \n                      than 15 characters and no characters other than letters, numbers and the underscore may be used\n                      </div>\n              </div>\n              <div class="input-container">\n                  <i class="fa fa-key"></i> \n                  <input type="password" placeholder="Confirm your password" ngControl="confirmation">\n                  <div class="foot-note error-message dynamic-text" \n                      [class.show]="(password.touched || confirmation.touched) && passwordGroup.errors !== null">\n                      Passwords don\'t match!\n                      </div>\n              </div>\n            </span>\n            <div class="input-container">\n                <button type="submit" \n                    class="btn btn-primary submit-btn" \n                    [disabled]="!loginForm.valid">Create User</button>\n            </div>\n            <div class="signup-btn">\n                <a [routerLink]="[\'Login\']">Login</a> | <a>Help</a>\n            </div>\n            <footer>\n			    <span>Pathway™ - Powered by Angular 2.</span> <span>© 2016 Copyright rintoj (Rinto Jose).</span>\n		    </footer>\n		</form>        \n	'
}),__metadata("design:paramtypes",[common_2.FormBuilder,dispatcher_5.Dispatcher,application_state_4.ApplicationStateObservable])],RegisterComponent)}(),exports_26("RegisterComponent",RegisterComponent)}}}),System.register("store/app-state.store",["state/config","state/dispatcher","rxjs/Observable","angular2/core","state/action","state/application-state"],function(exports_27){"use strict";var config_4,dispatcher_6,Observable_7,core_16,action_8,application_state_5,AppStateStore;return{setters:[function(config_4_1){config_4=config_4_1},function(dispatcher_6_1){dispatcher_6=dispatcher_6_1},function(Observable_7_1){Observable_7=Observable_7_1},function(core_16_1){core_16=core_16_1},function(action_8_1){action_8=action_8_1},function(application_state_5_1){application_state_5=application_state_5_1}],execute:function(){AppStateStore=function(){function AppStateStore(dispatcher,stateObservable){this.stateObservable=stateObservable,this.subscribeToDispatcher(dispatcher),this.stateObservable.subscribe(this.saveApplicationState.bind(this))}return AppStateStore.prototype.subscribeToDispatcher=function(dispatcher){dispatcher.subscribe([new action_8.RestoreAppStateAction],this.restoreAppState.bind(this))},AppStateStore.prototype.saveApplicationState=function(immutableState){var state=immutableState.toJS?immutableState.toJS():immutableState;if(console.log(state),state.ui.restorePending===!1){console.log("Saving application state",state);var applicationId=btoa(config_4.Config.APPLICATION_NAME);localStorage.setItem(applicationId,btoa(JSON.stringify(state)))}},AppStateStore.prototype.restoreAppState=function(currentState,action){return Observable_7.Observable.create(function(observer){var applicationId=btoa(config_4.Config.APPLICATION_NAME),applicationState=localStorage.getItem(applicationId);if(applicationState){var state=JSON.parse(atob(applicationState));state.ui.restorePending=!1,console.log("Application State restored",state),observer.next(state)}else currentState.ui.restorePending=!1,observer.next(currentState);observer.complete()})},AppStateStore=__decorate([core_16.Injectable(),__metadata("design:paramtypes",[dispatcher_6.Dispatcher,application_state_5.ApplicationStateObservable])],AppStateStore)}(),exports_27("AppStateStore",AppStateStore)}}}),System.register("store/data.store",["rxjs/Observable"],function(exports_28){"use strict";var Observable_8,DataStore;return{setters:[function(Observable_8_1){Observable_8=Observable_8_1}],execute:function(){DataStore=function(){function DataStore(dispatcher){this.dispatcher=dispatcher,this.registerForActions(dispatcher)}return DataStore.prototype.registerForActions=function(dispatcher){},DataStore.prototype.read=function(id){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore.prototype.fetch=function(item,page){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore.prototype.save=function(item){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore.prototype.saveBulk=function(items){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore.prototype["delete"]=function(item){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore.prototype.deleteBulk=function(items){return Observable_8.Observable.create(function(observer){observer.complete()}).share()},DataStore}(),exports_28("DataStore",DataStore)}}}),System.register("store/projectlog.store",["state/pagination","store/data.store","state/dispatcher","angular2/core","service/oauth2-rest.service","state/action"],function(exports_29){"use strict";var pagination_3,data_store_1,dispatcher_7,core_17,oauth2_rest_service_1,action_9,ProjectlogStore;return{setters:[function(pagination_3_1){pagination_3=pagination_3_1},function(data_store_1_1){data_store_1=data_store_1_1},function(dispatcher_7_1){dispatcher_7=dispatcher_7_1},function(core_17_1){core_17=core_17_1},function(oauth2_rest_service_1_1){oauth2_rest_service_1=oauth2_rest_service_1_1},function(action_9_1){action_9=action_9_1}],execute:function(){ProjectlogStore=function(_super){function ProjectlogStore(dataService,dispatcher){_super.call(this,dispatcher),this.dataService=dataService}return __extends(ProjectlogStore,_super),ProjectlogStore.prototype.subscribeToDispatcher=function(dispatcher){dispatcher.subscribe([new action_9.FetchProjectlogAction(null)],this.fetchProjectlog.bind(this)),dispatcher.subscribe([new action_9.CreateProjectlogAction(null)],this.createProjectlog.bind(this)),dispatcher.subscribe([new action_9.DeleteProjectlogAction(null)],this.deleteProjectlog.bind(this))},ProjectlogStore.prototype.createProjectlog=function(state,action){return console.log("createProjectlogAction",state,action),state.ui.syncing=!0,state},ProjectlogStore.prototype.deleteProjectlog=function(state,action){return console.log("deleteProjectlogAction",state,action),state.ui.syncing=!1,state},ProjectlogStore.prototype.fetchProjectlog=function(state,action){return null},ProjectlogStore.prototype.mapResponse=function(response,page){var json=response.json(),nextPage=page?page.setTotalItems(json.hits.total):new pagination_3.Page(json.hits.total),data=json.hits.hits.map(function(item){return item._source.id=item._id,item._source});return{projectlogs:{page:nextPage,list:data}}},ProjectlogStore=__decorate([core_17.Injectable(),__param(0,core_17.Inject("DataService")),__metadata("design:paramtypes",[oauth2_rest_service_1.RestServiceWithOAuth2,dispatcher_7.Dispatcher])],ProjectlogStore)}(data_store_1.DataStore),exports_29("ProjectlogStore",ProjectlogStore)}}}),System.register("store/user.store",["state/user","state/dispatcher","rxjs/Observable","angular2/core","angular2/http","service/oauth2-rest.service","state/action"],function(exports_30){"use strict";var user_2,dispatcher_8,Observable_9,core_18,http_3,oauth2_rest_service_2,action_10,UserStore;return{setters:[function(user_2_1){user_2=user_2_1},function(dispatcher_8_1){dispatcher_8=dispatcher_8_1},function(Observable_9_1){Observable_9=Observable_9_1},function(core_18_1){core_18=core_18_1},function(http_3_1){http_3=http_3_1},function(oauth2_rest_service_2_1){oauth2_rest_service_2=oauth2_rest_service_2_1},function(action_10_1){action_10=action_10_1}],execute:function(){UserStore=function(){function UserStore(dataService,dispatcher){this.dataService=dataService,this.url="/oauth2",this.subscribeToDispatcher(dispatcher)}return UserStore.prototype.subscribeToDispatcher=function(dispatcher){dispatcher.subscribe([new action_10.LoginAction(null)],this.login.bind(this)),dispatcher.subscribe([new action_10.LogoutAction],this.logout.bind(this)),dispatcher.subscribe([new action_10.ValidateUserAction],this.validateUser.bind(this)),dispatcher.subscribe([new action_10.CreateUserAction(null)],this.createUser.bind(this)),dispatcher.subscribe([new action_10.CheckUserAction(null)],this.checkUser.bind(this)),dispatcher.subscribe([new action_10.AuthorizeAction(null)],this.authorize.bind(this))},UserStore.prototype.login=function(state,action){return this.dataService.authenticate(action.user.userId,action.user.password).map(function(auth){return state.user={id:null,name:"User",userId:action.user.userId,auth:auth},state})},UserStore.prototype.logout=function(state,action){return this.dataService.revokeAuthentication().map(function(response){return state.user=void 0,state})},UserStore.prototype.authorize=function(state,action){return Observable_9.Observable.create(function(observer){observer.next(state.user&&state.user.roles&&state.user.roles.filter(function(value){return action.roles.indexOf(value)>=0}).length>0),observer.complete()}).share()},UserStore.prototype.validateUser=function(state,action){return state.user?this.dataService.requestWithBasicAuth(this.url+"/user",http_3.RequestMethod.Get,null,{userId:state.user.userId}).map(function(response){var json=response.json()[0];return state.user={id:json._id,name:json.name,roles:json.roles.map(function(value){return user_2.Role[value.toUpperCase()]}),userId:json.userId,auth:state.user&&state.user.auth},state}):Observable_9.Observable.create(function(observer){observer.error("No user"),observer.complete()}).share()},UserStore.prototype.createUser=function(state,action){return this.dataService.put(this.url+"/register",action.user).map(function(response){return state})},UserStore.prototype.checkUser=function(state,action){return this.dataService.requestWithBasicAuth(this.url+"/user",http_3.RequestMethod.Get,null,{userId:action.userId}).map(function(response){return response.json()})},UserStore=__decorate([core_18.Injectable(),__param(0,core_18.Inject("DataService")),__metadata("design:paramtypes",[oauth2_rest_service_2.RestServiceWithOAuth2,dispatcher_8.Dispatcher])],UserStore)}(),exports_30("UserStore",UserStore)}}}),System.register("app",["state/config","angular2/platform/browser","state/dispatcher","component/main/main.component","angular2/http","util/application-ref","component/login/login.component","angular2/core","angular2/router","component/login/register.component","state/action","service/oauth2-rest.service","state/application-state","store/app-state.store","store/projectlog.store","store/user.store","service/data.service","rxjs/add/operator/share","rxjs/add/operator/map","rxjs/add/operator/merge"],function(exports_31){"use strict";var config_5,browser_1,dispatcher_9,main_component_1,http_4,application_ref_2,login_component_1,core_19,router_6,register_component_1,action_11,oauth2_rest_service_3,application_state_6,router_7,router_8,core_20,app_state_store_1,projectlog_store_1,user_store_1,data_service_1,AppComponent;return{setters:[function(config_5_1){config_5=config_5_1},function(browser_1_1){browser_1=browser_1_1},function(dispatcher_9_1){dispatcher_9=dispatcher_9_1},function(main_component_1_1){main_component_1=main_component_1_1},function(http_4_1){http_4=http_4_1},function(application_ref_2_1){application_ref_2=application_ref_2_1},function(login_component_1_1){login_component_1=login_component_1_1},function(core_19_1){core_19=core_19_1,core_20=core_19_1},function(router_6_1){router_6=router_6_1,router_7=router_6_1,router_8=router_6_1},function(register_component_1_1){register_component_1=register_component_1_1},function(action_11_1){action_11=action_11_1},function(oauth2_rest_service_3_1){oauth2_rest_service_3=oauth2_rest_service_3_1},function(application_state_6_1){application_state_6=application_state_6_1},function(app_state_store_1_1){app_state_store_1=app_state_store_1_1},function(projectlog_store_1_1){projectlog_store_1=projectlog_store_1_1},function(user_store_1_1){user_store_1=user_store_1_1},function(data_service_1_1){data_service_1=data_service_1_1},function(_1){},function(_2){},function(_3){}],execute:function(){core_20.enableProdMode(),AppComponent=function(){function AppComponent(dispatcher,userStore,appStateStore,projectlogStore){this.dispatcher=dispatcher,this.userStore=userStore,this.appStateStore=appStateStore,this.projectlogStore=projectlogStore,console.log("Application created!"),this.dispatcher.next(new action_11.RestoreAppStateAction).subscribe()}return AppComponent=__decorate([core_19.View({directives:[router_7.ROUTER_DIRECTIVES],template:"<router-outlet></router-outlet>"}),router_7.RouteConfig([{path:"/home",name:"Home",component:main_component_1.MainComponent,useAsDefault:!0},{path:"/login",name:"Login",component:login_component_1.LoginComponent},{path:"/register",name:"Register",component:register_component_1.RegisterComponent},{path:"/**",redirectTo:["Home"]}]),core_19.Component({selector:"pw-app",providers:[app_state_store_1.AppStateStore,projectlog_store_1.ProjectlogStore,user_store_1.UserStore]}),__metadata("design:paramtypes",[dispatcher_9.Dispatcher,user_store_1.UserStore,app_state_store_1.AppStateStore,projectlog_store_1.ProjectlogStore])],AppComponent)}(),exports_31("AppComponent",AppComponent),browser_1.bootstrap(AppComponent,[http_4.HTTP_PROVIDERS,router_6.ROUTER_PROVIDERS,core_20.provide("RestServiceOptions",{useValue:config_5.Config.REST_SERVICE_OPTIONS}),core_20.provide("DataServiceOptions",{useValue:config_5.Config.DATA_SERVICE_OPTIONS}),core_20.provide("DataService",{useClass:oauth2_rest_service_3.RestServiceWithOAuth2}),core_20.provide("OfflineDataService",{useClass:data_service_1.DataService}),core_20.provide(router_8.LocationStrategy,{useClass:router_8.HashLocationStrategy}),core_20.provide(dispatcher_9.Dispatcher,{useValue:new dispatcher_9.Dispatcher(config_5.Config.INITIAL_STATE)}),core_20.provide(application_state_6.ApplicationStateObservable,{useFactory:dispatcher_9.Dispatcher.stateFactory,deps:[new core_20.Inject(dispatcher_9.Dispatcher)]})]).then(function(appRef){application_ref_2.applicationRef(appRef)})}}}),System.register("extlibs",[],function(exports_32){"use strict";return{setters:[],execute:function(){if(!_||!Immutable)throw"extlibs: Some of the external libraries are not loaded!";exports_32("_",_),exports_32("Immutable",Immutable)}}}),System.config({bundles:{"js/app.js":["app"]},map:{}}),System["import"]("app")["catch"](console.error.bind(console)),System.register("directive/log-element.directive",["angular2/core"],function(exports_33){"use strict";var core_21,LogElement;return{setters:[function(core_21_1){core_21=core_21_1}],execute:function(){LogElement=function(){function LogElement(element){console.log("directive [logElement]",element)}return LogElement=__decorate([core_21.Directive({selector:"[logElement]"}),__metadata("design:paramtypes",[core_21.ElementRef])],LogElement)}(),exports_33("LogElement",LogElement)}}}),System.register("pipe/truncate.pipe",["angular2/core"],function(exports_34){"use strict";var core_22,TruncatePipe;return{setters:[function(core_22_1){core_22=core_22_1}],execute:function(){TruncatePipe=function(){function TruncatePipe(){}return TruncatePipe.prototype.transform=function(value,args){var length=parseInt(args[0]||"20",10),suffix=args[1]||"";return value.length<=length?value:value.substring(0,length)+suffix},TruncatePipe=__decorate([core_22.Pipe({name:"truncate"}),__metadata("design:paramtypes",[])],TruncatePipe)}(),exports_34("TruncatePipe",TruncatePipe)}}}),System.register("store/bulk-rest.service",["rxjs/add/operator/map","angular2/core","angular2/src/facade/promise","angular2/http"],function(exports_35){"use strict";var core_23,promise_1,http_5,BulkRestOptions,BulkRestService;return{setters:[function(_4){},function(core_23_1){core_23=core_23_1},function(promise_1_1){promise_1=promise_1_1},function(http_5_1){http_5=http_5_1}],execute:function(){BulkRestOptions=function(_super){function BulkRestOptions(){_super.call(this),this.headers.append("Content-Type","application/json")}return __extends(BulkRestOptions,_super),BulkRestOptions}(http_5.BaseRequestOptions),exports_35("BulkRestOptions",BulkRestOptions),BulkRestService=function(){function BulkRestService(http){this.http=http,this.restOptions=new BulkRestOptions}return BulkRestService.prototype.uploadSampleData=function(dataUrl,uploadUrl,callback){var _this=this,defer=promise_1.PromiseWrapper.completer();return this.read(dataUrl).subscribe(function(data){return _this.upload(uploadUrl,data).subscribe(defer.resolve,defer.reject)},defer.reject),defer.promise},BulkRestService.prototype.upload=function(path,body){for(var payload="",_i=0,body_1=body;_i<body_1.length;_i++){var item=body_1[_i];payload+="\n"+JSON.stringify({index:{_id:item._id}}),delete item._id,payload+="\n"+JSON.stringify(item)}return payload+="\n",this.request(path,http_5.RequestMethod.Post,payload).map(function(res){return res.json()})},BulkRestService.prototype.read=function(path,search){return this.request(path,http_5.RequestMethod.Get,null,search).map(function(res){return res.json()})},BulkRestService.prototype.clearData=function(url){var defer=promise_1.PromiseWrapper.completer();return this.request(url,http_5.RequestMethod.Delete,null,null).map(function(res){return res.json()}).subscribe(defer.resolve,defer.reject),defer.promise},BulkRestService.prototype.request=function(path,method,body,search){var options=new http_5.RequestOptions(this.restOptions.merge({method:method,url:path,body:body,search:this.serialize(search)}));return this.http.request(new http_5.Request(options))},BulkRestService.prototype.serialize=function(obj){var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},BulkRestService=__decorate([core_23.Injectable(),__metadata("design:paramtypes",[http_5.Http])],BulkRestService)}(),exports_35("BulkRestService",BulkRestService)}}}),System.register("util/ObservableUtil",["rxjs/Observable"],function(exports_36){"use strict";var Observable_10,ObservableUtil;return{setters:[function(Observable_10_1){Observable_10=Observable_10_1}],execute:function(){ObservableUtil=function(){function ObservableUtil(){}return ObservableUtil.observeOnce=function(observable){var nextObservable=Observable_10.Observable.create(function(observer){observable["catch"](function(error){return observer.error(error),observer.complete(),Observable_10.Observable.empty()}).subscribe(function(value){observer.next(value),observer.complete()},function(error){observer.error(error),observer.complete()},function(){return observer.complete()})}).share();return nextObservable.subscribe(),nextObservable},ObservableUtil}(),exports_36("ObservableUtil",ObservableUtil)}}});